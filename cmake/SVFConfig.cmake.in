@PACKAGE_INIT@

include("${CMAKE_CURRENT_LIST_DIR}/@PROJECT_NAME@Targets.cmake")

# Build and source tree information
set(SVF_ROOT_DIR "@SVF_ROOT_DIR@")
set(SVF_SOURCE_DIR "@SVF_SOURCE_DIR@")
set(SVF_BUILD_DIR "@SVF_BUILD_DIR@")

set(SVF_CORE_ROOT "@SVF_CORE_ROOT@")
set(SVF_CORE_SRCS "@SVF_CORE_SRCS@")
set(SVF_CORE_INCLUDES "@SVF_CORE_INCLUDES@")

set(SVF_LLVM_ROOT "@SVF_LLVM_ROOT@")
set(SVF_LLVM_SRCS "@SVF_LLVM_SRCS@")
set(SVF_LLVM_TOOLS "@SVF_LLVM_TOOLS@")
set(SVF_LLVM_INCLUDES "@SVF_LLVM_INCLUDES@")

# Set the installed structures relative to this package's installation location
set(SVF_INSTALL_BINDIR "@PACKAGE_SVF_INSTALL_BINDIR@")
set(SVF_INSTALL_LIBDIR "@PACKAGE_SVF_INSTALL_LIBDIR@")
set(SVF_INSTALL_CMAKEDIR "@PACKAGE_SVF_INSTALL_CMAKEDIR@")
set(SVF_INSTALL_INCLUDEDIR "@PACKAGE_SVF_INSTALL_INCLUDEDIR@")
set(SVF_INSTALL_EXTAPI_DIR "@PACKAGE_SVF_EXTAPI_INSTALL_DIR@")
set(SVF_INSTALL_EXTAPI_FILE "@PACKAGE_SVF_EXTAPI_INSTALL_FILE@")

# Lastly derive exposed settings about SVF's build configuration
set(SVF_SANITIZE "@SVF_SANITIZE@")
set(SVF_COVERAGE "@SVF_COVERAGE@")
set(SVF_WARN_AS_ERROR "@SVF_WARN_AS_ERROR@")
set(SVF_EXPORT_DYNAMIC "@SVF_EXPORT_DYNAMIC@")
set(SVF_ENABLE_ASSERTIONS "@SVF_ENABLE_ASSERTIONS@")
set(SVF_ENABLE_OPAQUE_POINTERS "@SVF_ENABLE_OPAQUE_POINTERS@")

# Expose some additional build flags like the C++ version and such
set(SVF_BUILD_TYPE "@CMAKE_BUILD_TYPE@")
set(SVF_ENABLE_RTTI "@SVF_ENABLE_RTTI@")
set(SVF_CXX_STANDARD "@CMAKE_CXX_STANDARD@")
set(SVF_ENABLE_EXCEPTIONS "@SVF_ENABLE_EXCEPTIONS@")

message(STATUS "Found SVF Package:
        SVF_SOURCE_DIR:             ${SVF_SOURCE_DIR}
        SVF_BUILD_DIR:              ${SVF_BUILD_DIR}

        SVF_CORE_ROOT:              ${SVF_CORE_ROOT}
        SVF_CORE_SRCS:              ${SVF_CORE_SRCS}
        SVF_CORE_INCLUDES:          ${SVF_CORE_INCLUDES}

        SVF_LLVM_ROOT:              ${SVF_LLVM_ROOT}
        SVF_LLVM_SRCS:              ${SVF_LLVM_SRCS}
        SVF_LLVM_TOOLS:             ${SVF_LLVM_TOOLS}
        SVF_LLVM_INCLUDES:          ${SVF_LLVM_INCLUDES}

        SVF_INSTALL_BINDIR:         ${SVF_INSTALL_BINDIR}
        SVF_INSTALL_LIBDIR:         ${SVF_INSTALL_LIBDIR}
        SVF_INSTALL_CMAKEDIR:       ${SVF_INSTALL_CMAKEDIR}
        SVF_INSTALL_INCLUDEDIR:     ${SVF_INSTALL_INCLUDEDIR}
        SVF_INSTALL_EXTAPI_DIR:     ${SVF_INSTALL_EXTAPI_DIR}
        SVF_INSTALL_EXTAPI_FILE:    ${SVF_INSTALL_EXTAPI_FILE}

        SVF_SANITIZE:               ${SVF_SANITIZE}
        SVF_COVERAGE:               ${SVF_COVERAGE}
        SVF_WARN_AS_ERROR:          ${SVF_WARN_AS_ERROR}
        SVF_EXPORT_DYNAMIC:         ${SVF_EXPORT_DYNAMIC}
        SVF_ENABLE_ASSERTIONS:      ${SVF_ENABLE_ASSERTIONS}
        SVF_ENABLE_OPAQUE_POINTERS: ${SVF_ENABLE_OPAQUE_POINTERS}
        SVF_BUILD_TYPE:             ${SVF_BUILD_TYPE}
        SVF_ENABLE_RTTI:            ${SVF_ENABLE_RTTI}
        SVF_CXX_STANDARD:           ${SVF_CXX_STANDARD}
        SVF_ENABLE_EXCEPTIONS:      ${SVF_EABLE_EXCEPTIONS}")


include(CMakeFindDependencyMacro)


find_dependency(
    Z3
    CONFIG
    HINTS
    ${Z3_DIR}
    $ENV{Z3_DIR})
if(Z3_FOUND)
    message(STATUS "Found Z3 CMake package:
        Z3 Version Major:               ${Z3_VERSION_MAJOR}
        Z3 Version Minor:               ${Z3_VERSION_MINOR}
        Z3 Version Patch:               ${Z3_VERSION_PATCH}
        Z3 Version Tweak:               ${Z3_VERSION_TWEAK}
        Z3 Version String:              ${Z3_VERSION_STRING}
        Z3 C Include Directories:       ${Z3_C_INCLUDE_DIRS}
        Z3 C++ Include Directories:     ${Z3_CXX_INCLUDE_DIRS}
        Z3 Libraries:                   ${Z3_LIBRARIES}")
else()
    find_library(
        Z3_LIBRARIES REQUIRED
        NAMES z3
        HINTS ${Z3_DIR} ENV Z3_DIR
        PATH_SUFFIXES bin lib)
    find_path(
        Z3_INCLUDES REQUIRED
        NAMES z3++.h
        HINTS ${Z3_DIR} ENV Z3_DIR
        PATH_SUFFIXES include z3)
    message(STATUS "Z3 STATUS:
        Z3 library file:        ${Z3_LIBRARIES}
        Z3 include directory:   ${Z3_INCLUDES}")

    # Add the Z3 include directory and link the Z3 library to all targets of SVF
    set(CMAKE_INSTALL_RPATH ${Z3_INCLUDES})
    include_directories(SYSTEM ${Z3_INCLUDES})
endif()

find_dependency(
    LLVM
    CONFIG
    REQUIRED
    HINTS
    "${LLVM_DIR}"
    "$ENV{LLVM_DIR}"
    PATH_SUFFIXES
    "lib"
    "lib/cmake"
    "lib/cmake/llvm")

check_required_components("@PROJECT_NAME@")
